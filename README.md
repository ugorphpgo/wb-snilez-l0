# #–ó–∞–¥–∞–Ω–∏–µ l0 - –≥–æ—Ä—É—Ç–∏–Ω–æ–≤—ã–π golang

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö –∏–∑ Kafka, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ Postgres, –∫—ç—à–∏—Ä—É–µ—Ç –≤ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTP API –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ id –∑–∞–∫–∞–∑–∞ (`order_uid`).

---

## 
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Kafka (—Ç–æ–ø–∏–∫ `orders`)  
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø–∞—Ä—Å–∏–Ω–≥ JSON —Å–æ–æ–±—â–µ–Ω–∏–π  
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –≤ PostgreSQL (UPSERT –ø–æ `order_uid`)  
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞  
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –∏–∑ –ë–î –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ  
- HTTP API:
  - `GET /order/{order_uid}` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON  
- –í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞:
  - `GET /` ‚Äî —Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–∫–∞–∑–∞ –ø–æ `order_uid`  

---

## –° –ø–æ–º–æ—â—å—é –∫–∞–∫–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–æ–µ–∫—Ç
- **Go 1.25**  
- **Kafka**  
- **PostgreSQL** 
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è Kafka –∏ Postgres –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ–∫–∞–ª—å–Ω–æ c –ø–æ–º–æ—â—å—é docker-compose
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≤ –ø—Ä–æ–µ–∫—Ç–µ**:  
  `segmentio/kafka-go`, `pgx/v5`, `zap`, `viper`, `golang-migrate`

---

## Quick start

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–ë–î + Kafka + —Å–µ—Ä–≤–∏—Å):
   ```bash
   docker compose up -d --build
   ```

2. –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–¥—é—Å–µ—Ä(–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–æ–≤):
   ```bash
   go run ./cmd/producer
   ```

3. –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
   [http://localhost:8081](http://localhost:8081)

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
cmd/
  producer/      ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Kafka
  wbservice/     ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π HTTP-—Å–µ—Ä–≤–∏—Å
configs/
  config.yaml    ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
internal/
  app/           ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  cache/         ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫—ç—à–∞ –≤ –ø–∞–º—è—Ç–∏
  config/        ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  http/          ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ —Å–µ—Ä–≤–µ—Ä
  kafka/         ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Kafka
  log/           ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (zap)
  model/         ‚Äî –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞
  repo/          ‚Äî —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
  service/       ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
migrations/      ‚Äî SQL –º–∏–≥—Ä–∞—Ü–∏–∏
web/
  index.html     ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–∫–∞–∑–∞
```

---

##  –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞
```bash
GET http://localhost:8081/order/b563feb7b2b84b6test
```
–û—Ç–≤–µ—Ç:
```json
{
  "order_uid": "b563feb7b2b84b6test",
  "track_number": "WBILMTESTTRACK",
  "delivery": { "name": "Test Testov", "city": "Kiryat Mozkin" },
  "payment": { "amount": 1817, "currency": "USD" },
  "items": [{ "name": "Mascaras", "price": 453 }]
}
```


